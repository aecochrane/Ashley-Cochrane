/*!CK:138272896!*//*1452040502,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["vQmBY"]); }

__d('NotificationJewelReminder',['$','Arbiter','ContextualDialog','ContextualDialogXUITheme','DOM','Event','ImageBlock.react','LayerFadeOnHide','LayerFadeOnShow','NotificationStore','NotificationUpdates','React','ReactDOM','SubscriptionsHandler','Toggler','clearTimeout','cx','fbt','ge','intlList','setTimeout'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){if(c.__markCompiled)c.__markCompiled();var ca=2,da='fbRequestsJewel',ea='fbNotificationsJewel';function fa(ga){'use strict';this.$NotificationJewelReminder1=ga;if(ga.request.count>0&&ga.show_request){this.$NotificationJewelReminder2(da);}else this.$NotificationJewelReminder3();}fa.prototype.$NotificationJewelReminder3=function(){'use strict';if(!this.$NotificationJewelReminder1.show_notif){return;}else{this.$NotificationJewelReminder4();return;}};fa.prototype.$NotificationJewelReminder4=function(){'use strict';this.$NotificationJewelReminder5=r.subscribe('update-notifications',(function(ga,ha){if(ha.nodes)this.$NotificationJewelReminder6(ha.nodes);}).bind(this));q.getNotifications(Number.isInteger(this.$NotificationJewelReminder1.show_notif)?this.$NotificationJewelReminder1.show_notif:0,this.$NotificationJewelReminder6.bind(this));};fa.prototype.$NotificationJewelReminder6=function(ga){'use strict';if(this.$NotificationJewelReminder5){this.$NotificationJewelReminder5.unsubscribe();this.$NotificationJewelReminder5=null;}var ha=z(ea);if(!ha||v.getInstance(ha).isShown())return;var ia=[],ja;ga=ga.filter(function(pa){return pa.seen_state==='UNSEEN_AND_UNREAD';});var ka=Object.keys(ga);for(var la=0;la<ka.length;la++){if(!ga[ka[la]].showBeep)continue;var ma=ga[ka[la]].actors;if(ma.length===0)continue;for(var na=0;na<ma.length;na++){ja=ja||ma[na].profile_picture.uri;if(ia.length<ca&&ma[na].name&&ia.indexOf(ma[na].name)===-1)ia.push(ma[na].name);}if(ia.length===ca)break;}if(ia.length===0||!ja)return;var oa=this.$NotificationJewelReminder7(ja,ia,ka.length,ea);this.$NotificationJewelReminder8(oa);};fa.prototype.$NotificationJewelReminder7=function(ga,ha,ia,ja){'use strict';var ka=s.createElement('div',{className:"_5bov"},s.createElement(n,null,s.createElement('img',{className:"_5bow",src:ga}),s.createElement('div',null,this.$NotificationJewelReminder9(ia,ha,ja)))),la=l.create('div');t.render(ka,la);var ma=new j({alignment:'right',contextSelector:'#'+ja+' a.jewelButton',offsetY:-10,position:'below',theme:k,width:210},la);ma.enableBehaviors([p,o]);return ma;};fa.prototype.$NotificationJewelReminder9=function(ga,ha,ia){'use strict';ha=ha.map(function(ja){return s.createElement('b',null,ja);});if(ia===ea){return y._({"*":{"notifications":"{number} notifications from {notification senders}","notification":"{number} notification from {notification senders}"}},[y.param('number',ga,[0]),y['enum'](ga>1?'notifications':'notification',{notifications:'notifications',notification:'notification'}),y.param('notification senders',aa(ha))]);}else return y._({"*":{"requests":"{number} friend requests from {request senders}","request":"{number} friend request from {request senders}"}},[y.param('number',ga,[0]),y['enum'](ga>1?'requests':'request',{requests:'requests',request:'request'}),y.param('request senders',aa(ha))]);};fa.prototype.$NotificationJewelReminder8=function(ga){'use strict';ga.show();this.$NotificationJewelReminder10=ga;var ha=ga.getRoot();this.$NotificationJewelReminder11=ba(this.$NotificationJewelReminder12.bind(this),this.$NotificationJewelReminder1.show_time);this.$NotificationJewelReminder13=new u();this.$NotificationJewelReminder13.addSubscriptions(i.subscribe('layer_shown',(function(ia,ja){if(ja&&ja.type==='Jewel')this.$NotificationJewelReminder12();}).bind(this)),m.listen(ha,'mouseenter',(function(){w(this.$NotificationJewelReminder11);}).bind(this)),m.listen(ha,'mouseleave',this.$NotificationJewelReminder12.bind(this)),m.listen(ha,'click',(function(){this.$NotificationJewelReminder12();v.show(h(ea));}).bind(this)));};fa.prototype.$NotificationJewelReminder12=function(){'use strict';w(this.$NotificationJewelReminder11);this.$NotificationJewelReminder10.hide();this.$NotificationJewelReminder13.release();};fa.prototype.$NotificationJewelReminder2=function(ga){'use strict';if(!this.$NotificationJewelReminder1.show_request||!this.$NotificationJewelReminder1.request.count)return;var ha=z(ga);if(!ha||v.getInstance(ha).isShown())return;var ia=this.$NotificationJewelReminder7(this.$NotificationJewelReminder1.request.pics[0],this.$NotificationJewelReminder1.request.names,this.$NotificationJewelReminder1.request.count,ga);this.$NotificationJewelReminder14(ia);};fa.prototype.$NotificationJewelReminder14=function(ga){'use strict';ga.show();this.$NotificationJewelReminder15=ga;var ha=ga.getRoot();this.$NotificationJewelReminder16=ba(this.$NotificationJewelReminder17.bind(this),this.$NotificationJewelReminder1.show_time);this.$NotificationJewelReminder18=new u();this.$NotificationJewelReminder18.addSubscriptions(i.subscribe('layer_shown',(function(ia,ja){if(ja&&ja.type==='Jewel')this.$NotificationJewelReminder17();}).bind(this)),m.listen(ha,'mouseenter',(function(){w(this.$NotificationJewelReminder16);}).bind(this)),m.listen(ha,'mouseleave',this.$NotificationJewelReminder17.bind(this)),m.listen(ha,'click',(function(){this.$NotificationJewelReminder17();v.show(h(da));}).bind(this)));};fa.prototype.$NotificationJewelReminder17=function(){'use strict';w(this.$NotificationJewelReminder16);this.$NotificationJewelReminder15.hide();this.$NotificationJewelReminder18.release();this.$NotificationJewelReminder3();};f.exports=fa;},null);